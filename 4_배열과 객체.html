<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>4_배열과 객체</title>
    <link type="text/css" rel="stylesheet" href="css/style.css">
  </head>
  <body>
    <h1>4. 배열과 객체</h1>
    <h2>4.1. 배열 (array)</h2>
    <h3>4.1.1. 배열</h3>
    <p>배열은 여러 개의 값을 하나의 이름으로 모아 저장해 놓고, 인덱스(index) 번호를 통해 접근하는 변수형입니다.</p>
    <p>배열은 다른 변수처럼 var이나 global로 정의합니다. 배열의 정의와 접근 형식은 아래와 같습니다.</p>
    <table>
      <tbody>
        <tr>
          <td class="vert">정의</td>
          <td>var 배열명 = [ 값, 값, …] </td>
        </tr>
        <tr>
          <td class="vert">접근 </td>
          <td>배열명[인덱스] </td>
        </tr>
      </tbody>
    </table>
    <br>
    배열을 구성하는 값들을 요소(element)라고 합니다. 위 배열 distances에는 총 5개의 요소가 있습니다. 인덱스는 0부터
    시작합니다. distances의 0번 요소는 10, 1번 요소는 10.5 입니다.<br>
    배열의 특정 요소값을 읽거나 쓸 때는 아래와 같이 [ ] 연산자를 사용합니다.<br>
    <p>아래는 객체 정의하고 접근 한 예입니다.</p>
    <table>
      <tbody>
        <tr>
          <td class="vert">0001.job </td>
          <td>var distances = [ 10, 10.5, 12.7, 11.92, 9.5 ]<br>
            distances[1]=20.5<br>
            print distances[0], distances[1]<br>
            end </td>
        </tr>
        <tr>
          <td class="vert">결과 </td>
          <td>10<br>
            20.5 </td>
        </tr>
      </tbody>
    </table>
    배열의 요소 개수는 len( ) 함수로 얻을 수 있습니다. 앞에서 len( ) 함수는 문자열의 길이를 얻는 함수로서 소개된 바 있습니다.
    그런데, len( )의 매개변수로 배열을 넣으면 배열의 요소 개수를 리턴해줍니다.<br>
    <p> </p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <th>함수명</th>
          <th>설명</th>
          <th>사용 예</th>
          <th>결과</th>
        </tr>
        <tr>
          <td>len(a)</td>
          <td>a가 문자열이면 문자열의 길이를 리턴합니다.<br>
            a가 배열이면 배열의 요소 개수를 리턴합니다.</td>
          <td>len("HELLO")<br>
            len([20, 30, 80])</td>
          <td>5<br>
            3</td>
        </tr>
      </tbody>
    </table>
    배열의 모든 요소들에 대해 어떤 처리를 수행하는 경우에는 주로 for~next 문이 사용됩니다.<br>
    <table>
      <tbody>
        <tr>
          <td class="vert">0001.job </td>
          <td>var distances = [ 10, 10.5, 12.7, 11.92, 9.5]<br>
            for i=0 to len(distances)-1<br>
            &nbsp; distances[i] = distances[i]+10<br>
            print distances[i]<br>
            next </td>
        </tr>
        <tr>
          <td class="vert">결과 </td>
          <td>20<br>
            20.5<br>
            22.7<br>
            21.92<br>
            19.5 </td>
        </tr>
      </tbody>
    </table>
    배열 안에 저장되는 값들은 서로 다른 타입이어도 상관없습니다.<br>
    <table>
      <tbody>
        <tr>
          <td class="vert">0001.job </td>
          <td>var arr = [ 10, "abc", true]<br>
            for i=0 to 2<br>
            print arr[i]<br>
            next </td>
        </tr>
        <tr>
          <td class="vert">결과 </td>
          <td>10<br>
            abc<br>
            true </td>
        </tr>
      </tbody>
    </table>
    <br>
    <h3>4.1.2. 다차원 배열</h3>
    배열의 요소로서 배열이 내포될 수도 있습니다.<br>
    다차원 배열의 요소에 접근할 때는 [ ] 연산자를 연속적으로 사용하면 됩니다.<br>
    아래의 예에서 arr_y는 2차원 배열입니다. (1)<br>
    <p> arr_y[1]는 이 중 인덱스 1의 요소, 즉 ["abc", "jqk", "xyz"] 배열인데, 이를 새로운 변수 arr_x에
      대입했습니다. (2)</p>
    따라서, arr_x[1]은 "jqk"이고, arr_y[1][2]는 arr_y[1]의 [2]를 가리키므로 "xyz"입니다.<br>
    <table>
      <tbody>
        <tr>
          <td class="vert">0001.job </td>
          <td>var arr_y = [ [10,20], ["abc","jqk", "xyz"] ]&nbsp; # (1)<br>
            var arr_x=arr_y[1]&nbsp; # (2)<br>
            print arr_x[1]<br>
            print arr_y[1][2] </td>
        </tr>
        <tr>
          <td class="vert">결과 </td>
          <td>jqk<br>
            xyz </td>
        </tr>
      </tbody>
    </table>
    <br>
    <h3>4.1.3. 배열 생성자 함수</h3>
    수 백개의 요소를 가진 배열을 생성하고자 한다면, [ ] 표기만으로는 어렵습니다. 생성자 함수를 호출하면 원하는 개수의 배열을 생성할 수
    있습니다. 각 요소는 0으로 초기화됩니다.<br>
    <div class="codebox"> var 배열변수명 = Array(900)&nbsp;&nbsp;&nbsp; # 900개의 요소를
      가진 배열 생성<br>
    </div>
    인수를 2개 이상 지정하면 다차원 배열을 생성할 수 있습니다. 아래 3차원 배열의 예에서는 [4]가 최하위
    차원(dimension)입니다.<br>
    <div class="codebox"> var 배열변수명 = Array(3,2,4)&nbsp;&nbsp;&nbsp; #
      [3][2][4]개의 3차원 배열 생성<br>
      # [ [[0,0,0,0], [0,0,0,0]], [[0,0,0,0], [0,0,0,0]], [[0,0,0,0], [0,0,0,0]]
      ]<br>
    </div>
    <br>
     <br>
    <h2>4.2. 객체 (object)</h2>
    앞서, 배열은 여러 개의 요소값을 보관할 수 있고, 인덱스로 접근한다는 것을 배웠습니다.<br>
    <p> 객체는 여러 요소 값을 보관한다는 점에서는 배열과 같습니다. 다른 점은 인덱스가 아닌 키(key)로 접근한다는 점입니다. 키는
      숫자가 아닌 문자열입니다.</p>
    객체는 다른 변수처럼 var이나 global로 정의합니다. 객체의 정의와 접근 형식은 아래와 같습니다.<br>
    <table>
      <tbody>
        <tr>
          <td class="vert">정의 </td>
          <td>var 객체명 = { 키 : 값, 키 : 값, …} </td>
        </tr>
        <tr>
          <td class="vert">접근 </td>
          <td>객체명.키 </td>
        </tr>
      </tbody>
    </table>
    아래는 객체 정의하고 접근 한 예입니다. <br>
    <table>
      <tbody>
        <tr>
          <td class="vert">0001.job </td>
          <td>var gap = { x:200, y:152.6 }<br>
            gap.x = gap.x + 10<br>
            print gap.x, gap.y </td>
        </tr>
        <tr>
          <td class="vert">결과 </td>
          <td>210 152.6 </td>
        </tr>
      </tbody>
    </table>
    <p> 객체의 키는 반드시 식별자 형식이어야 하지만, 요소의 값은 모든 타입이 허용되며 서로 다른 타입이어도 상관없습니다. </p>
    <p>객체는 요소로서 다른 객체나 배열을 포함할 수 있습니다. 마찬가지로 배열도 요소로서 다른 배열이나 객체를 포함할 수 있습니다. 아래
      예에서, 객체 work는 객체 size와 배열 heights를 포함하고 있습니다.</p>
    <table>
      <tbody>
        <tr>
          <td class="vert">0001.job </td>
          <td>var work = { part_no:3, name: "gear", tested : false<br>
            , size : { x : 150, y : 80 }<br>
            , heights : [ 72.89, 74.91, 81.03, 87.60, 87.11 ] }<br>
            print work.tested, work.size.y, work.heights[3] </td>
        </tr>
        <tr>
          <td class="vert">결과 </td>
          <td>false, 80, 87.600000 </td>
        </tr>
      </tbody>
    </table>
    <br>
    <h2>4.3. 배열과 객체의 복사 대입(assignment)</h2>
    대입문 우변이 배열이나 객체 변수인 경우, 변수의 값 전체가 좌변의 변수로 복사됩니다. 배열이나 객체가 요소값으로서 서브 배열과 서브
    객체들을 복잡하게 포함하고 있을 때에도, 이러한 포함 구조들이 모두 복사되는데 이를 깊은 복사(deep copy)라고 합니다.<br>
    <table>
      <tbody>
        <tr>
          <td class="vert">0001.job</td>
          <td>var my_obj = [ x:5, y:0, z:0 ]<br>
            my_obj.y=[ [10, 20], ["abc", true] ]<br>
            my_obj.z={ a:7, b:8 }<br>
            var your_obj=my_obj # deep copy<br>
            print your_obj.y[0]</td>
        </tr>
        <tr>
          <td class="vert">결과</td>
          <td>[10, 20]</td>
        </tr>
      </tbody>
    </table>
    <img src="pic/4_3_copy_arr_obj.png" height="200"> <br>
    <h2>4.4. 참조 전달(call-by-reference)와 값 전달(call-by-value)</h2>
    3.4절의 call문과 jump문 설명에서 형식 매개변수와 실 매개변수의 개념을 배운 바 있습니다. 실 매개변수를 서브 프로그램으로
    전달했는데, 서브 프로그램이 이 변수의 값을 변경한 후 종료했다면 변경된 내용이 메인 프로그램에 반영되어 있을까요?<br>
    가령, 아래와 같이 세제곱을 해주는 서브 프로그램 0005_pow3.job를 만들었다고 합시다.<br>
    <table>
      <tbody>
        <tr>
          <td class="vert">0001.job </td>
          <td>var x=2<br>
            call 0005_pow3,x<br>
            print x<br>
            end </td>
        </tr>
        <tr>
          <td class="vert">0005_pow3.job </td>
          <td>param p<br>
            var t=p<br>
            p=t*t*t # (1)<br>
            end </td>
        </tr>
        <tr>
          <td class="vert">결과 </td>
          <td>2 </td>
        </tr>
      </tbody>
    </table>
    2*2*2는 8이므로 8이 출력되기를 기대했지만, 결과는 2입니다. 숫자형 실 매개변수가 서브 프로그램으로 전달될 때는 매개변수로
    값(value)이 복사되기 때문입니다. (1)에서 세제곱 값을 복사본에 대입한 것이므로 원본 변수 x의 값에는 영향을 주지 못한
    것입니다.<br>
    따라서, 아래와 같이 return문으로 결과값을 전달받도록 교시 프로그램을 고쳐야 합니다.<br>
    <table>
      <tbody>
        <tr>
          <td class="vert">0001.job </td>
          <td>var x=2<br>
            call 0005_pow3,x<br>
            x=result()<br>
            print x<br>
            end </td>
        </tr>
        <tr>
          <td class="vert">0005_pow3.job </td>
          <td>param p<br>
            var t=p<br>
            p=t*t*t<br>
            return p </td>
        </tr>
        <tr>
          <td class="vert">결과 </td>
          <td>8 </td>
        </tr>
      </tbody>
    </table>
    반면, 배열이나 객체의 경우에는 복사본이 아니라 실제 변수의 참조(reference)가 전달됩니다. 참조란 변수의 위치와 같은
    개념입니다.<br>
    <br>
    아래와 같이 배열의 각 요소를 세제곱 해주는 서브 프로그램 0006_pow3.job의 경우에는 의도한 대로 실 매개변수 배열의 요소
    값들이 변경되었습니다.<br>
    <table>
      <tbody>
        <tr>
          <td class="vert"> 0001.job </td>
          <td>var x=[3, 2, 4]<br>
            call 0006_pow3,x<br>
            print x<br>
            end </td>
        </tr>
        <tr>
          <td class="vert">0006_pow3.job </td>
          <td>param p<br>
            var t<br>
            for i=0 to len(arr)-1<br>
            &nbsp; t=p[i]<br>
            p[i] = t*t*t<br>
            next<br>
            end </td>
        </tr>
        <tr>
          <td class="vert">결과 </td>
          <td>[27, 8, 64] </td>
        </tr>
      </tbody>
    </table>
    &nbsp;서브 프로그램 호출 시, 실 매개변수의 값의 복사본이 전달되는 것을 값에 의한 호출(call-by-value), 참조가
    전달되는 것을 참조에 의한 호출(call-by-reference) 이라고 합니다. 값 호출일 지 참조 호출일 지는 아래와 같이 값의
    형(type)에 의해 결정됩니다.<br>
    <table>
      <tbody>
        <tr>
          <td class="vert">값에 의한 호출 </td>
          <td>bool형, 숫자형, 문자열형 </td>
        </tr>
        <tr>
          <td class="vert">참조에 의한 호출 </td>
          <td>배열형, 객체형 </td>
        </tr>
      </tbody>
    </table>
    &nbsp;&nbsp;&nbsp; <br>
    <img src="pic/4_4_call_by.png" height="260"><br>
    <br>
    <br>
  </body>
</html>
